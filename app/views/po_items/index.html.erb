<%= render "layouts/navbar" %>
<div class="container">

  <p style="color: green"><%= notice %></p>

  <h1>Shopping Cart</h1>

  <div>
      <%# <table class="table table-hover"> %>
      <table class="table table-striped table-bordered table-hover">
        <thead class="thread-dark">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Product Name</th>
            <th scope="col">Price</th>
            <th scope="col">Qty</th>
            <th scope="col">Subtotal</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
        <% @po_items.each do |item|%>
          <tr>
            <th scope="row"><%=item.bid%></th>
            <td><%= link_to item.name, item, id: 'link_to_id' %></td>
            <td><%= item.price%></td>
            <td><%= item.quantity%></td>
            <td><%= item.quantity*item.price%></td>
            <td><%= button_to "Destroy", item, method: :delete , class:'btn btn-outline-danger'%></td>
            
          </tr>
        <%end%>
              
          <%# {po_items.map((po_item) => (
            <tr>
              <th scope="row">{po_item.bid}</th>
              <td>{po_item.name}</td>
              <td>{po_item.price}</td>
              <td>{po_item.quantity}</td>
              <td>{po_item.price * po_item.quantity}</td>
              <td>
                <a
                  href={`po_items/${po_item.id}`}
                  method="delete"
                  class="card-link"
                >
                  Delete
                </a>
              </td>
            </tr>
          ))} %>
        </tbody>
      </table>
      <br />
      <br />

      <div class="col-sm-12">
        <h6>Cart Totals</h6>
        <div class="row">
          <div class="col-sm-4 border border-secondary">Subtotal</div>
          <div class="col-sm-2 border border-secondary">CA$<%= @subtotal %></div>
        </div>
        <div class="row">
          <div class="col-sm-4 border border-secondary">Shipping fees</div>
          <div class="col-sm-2 border border-secondary">
            CA$<%=@po_items.count%>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4 border border-secondary">Grand Total</div>
          <div class="col-sm-2 border border-secondary">
            CA$<%=@grandtotal%>
          </div>
        </div>
      </div>
      <br />

      <div class="row">
        <div class="col-sm-12 text-left">
          <a
            role="button"
            class="btn btn-secondary btn-md center-block"
            href="items"
            data-toggle="tooltip"
            data-placement="top"
            style="display: "inline-block";"
          >
            Continue Shopping
          </a>

          <a
            role="button"
            class="btn btn-primary btn-md center-block"
            href="purchase_orders/new"
            data-toggle="tooltip"
            data-placement="top"
            style="display: "inline-block""
          >
            Check out
          </a>
        </div>
      </div>
    </div>

  <%# <div id="po_items"> %>
    <%# <% @po_items.each do |po_item| %> 
      <%# <%= render po_item %> 
        <%# <p> %>
        <%# <%= link_to "Show this po item", po_item %> 
      <%# </p> %>
    <%# <% end %> 
  <%# </div> %>

  <%# <%= link_to "New po item", new_po_item_path %> 
    <%# <%= react_component("POItems", { po_items: @po_items.as_json(only: [:id, :bid, :name, :price, :quantity, :purchase_order_id, :item_id]) }) %> 

</div>
